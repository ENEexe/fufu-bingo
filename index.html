<!DOCTYPE html>
<html>
  <head>
    <title>Fufu Bingo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Shantell+Sans:ital,wght@0,300..800;1,300..800&display=swap"
      rel="stylesheet"
    />
  </head>
  <body
    style="
      width: fit-content;
      text-align: center;
      padding: 2rem;
      margin: 0;
      font-family: 'Shantell Sans', cursive;
      background: #d5d5d5;
    "
  >
    <div style="display: flex">
      <div>
        <div
          id="bingoDiv"
          style="
            width: fit-content;
            text-align: center;
            padding: 2rem;
            margin: 0;
            background: linear-gradient(to bottom, black, #232323);
            border-radius: 4px;
          "
        >
          <h1 style="color: #d5d5d5; letter-spacing: 20px; font-size: 60px">Fufu Bingo</h1>
          <!-- <h1 style="color: white; letter-spacing: 20px; font-size: 60px">(24h stream edition)</h1> -->

          <table class="grid">
            <tbody>
              <!-- <tr>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
              </tr> -->
              <tr>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <!-- <td class="cell"></td> -->
                <!-- <td class="cell"></td> -->
              </tr>
              <tr>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <!-- <td class="cell"></td> -->
                <!-- <td class="cell"></td> -->
              </tr>
              <tr>
                <!-- <td class="cell"></td> -->
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell cell-free"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <!-- <td class="cell"></td> -->
              </tr>
              <tr>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <!-- <td class="cell"></td> -->
                <!-- <td class="cell"></td> -->
              </tr>
              <tr>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <!-- <td class="cell"></td> -->
                <!-- <td class="cell"></td> -->
              </tr>
              <!-- <tr>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
              </tr> -->
            </tbody>
          </table>
        </div>
        <div style="margin-top: 2rem; display: flex; justify-content: center">
          <div class="btn" onclick="saveDivAsImage()">
            <a>Save as Image</a>
          </div>
        </div>
      </div>
      <div style="margin-left: 5rem; padding-top: 4rem; font-size: 24px">
        <ul style="list-style: none; padding: 0px" class="list">
          <li>WATCH FUFU LIVE ON <a href="https://www.twitch.tv/fufu" target="_blank">TWITCH</a></li>
          <li style="margin-top: 2rem">
            CHECK OUT FUFU MERCH
            <a href="https://uwumarket.us/collections/fufu" target="_blank">HERE</a>
          </li>
          <li style="margin-top: 2rem">
            CHECK ALL AVAILABLE PROMPTS OR SUGGEST NEW ONES
            <a
              href="https://docs.google.com/spreadsheets/d/16097iUdG0rW028w2dxASdTqvFvuQSR_VzWCoMLD3xyM/edit?usp=sharing"
              target="_blank"
              >HERE</a
            >
          </li>
          <div style="margin-top: 10rem; display: flex; justify-content: center">
            <div class="btn" onclick="toggleDarkMode()">
              <a>Toggle Dark Mode</a>
            </div>
          </div>
        </ul>
      </div>
    </div>
    <style>
      .cell {
        border: 2px solid #d5d5d5;
        width: 150px;
        height: 150px;
        color: #d5d5d5;
        padding: 10px;
        font-size: 20px;
        cursor: pointer;
        position: relative;
        min-width: 150px;
      }
      .circle {
        width: 130px;
        height: 130px;
        border: 12px solid yellow;
        border-radius: 50%;
        z-index: 999;
        position: absolute;
        top: 0;
      }
      .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
      }
      .btn {
        border: 1px solid black;
        padding: 24px;
        border-radius: 4px;
        font-size: 24px;
        cursor: pointer;
        width: fit-content;
      }
      .dark-mode {
        background: linear-gradient(to bottom, #232323, black) !important;
        .btn {
          color: #d5d5d5;
          border: 1px solid #d5d5d5;
        }
        li,
        a {
          color: #d5d5d5;
        }
      }
      .highlight {
        border-width: 2px;
        border-color: red;
      }
      @media (max-width: 768px) {
        .cell {
          width: 100px;
          height: 100px;
          font-size: 16px;
          padding: 8px;
        }
        .circle {
          width: 90px;
          height: 90px;
          border-width: 8px;
        }
        .btn {
          padding: 16px;
          font-size: 20px;
        }
      }
    </style>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script>
      function saveDivAsImage() {
        const div = document.querySelector("#bingoDiv");
        html2canvas(div).then(function (canvas) {
          const link = document.createElement("a");
          link.href = canvas.toDataURL();
          link.download = "bingo.png";
          link.click();
        });
      }

      // ADD YOU COLLECTION OF PROMPTS HERE
      const collection = [
        "It's not a Garyathon",
        "Fufu licks the screen/does the 'blep'",
        "Butter knife",
        "MYAA",
        "Fufu brings out her tail",
        "Fufu explains something for eternity",
        "Fufu cries",
        "Laser pointer",
        "Fufu hisses",
        "Fufu says something sus",
        "I'm not a masochist",
        "Boing sound effect",
        "HAAAAA!?",
        "I am not a clown",
        "Fufu reads out a chat copypasta",
        "Heart eyes",
        "Fufu presses the wrong button/toggle",
        "YIPPEE",
        "Stop shaking the cokey",
        "You are not called Gary",
        "Fufu pouts",
        "I'm not lewd, I'm daring",
        "Fine kok",
        "Fufu mispronounces a word/chatter name",
        "PSPSPSPS",
        "Fufu gets sidetracked for 5 min on any topic",
        "Fufu says it's a warm up game",
        "Fufu thirsts on a game/anime/virtual character",
        "Fufu complains we ruin raiders arrival",
        "Fufu calls for help to mods (and it doesn't work)",
        "Fufu says 'I have lots of bitches/I am not maidenless'",
        "Fufu says 'I'm not a furry'",
        "Laser pointer and butter knife combo",
        "Meme sub gift",
        "First time chatter makes Fufu mad (FirstTimeChadder)",
        "Fufu tries to ban the bingo",
        "Mrs Bach walks over keyboard/control panel",
        "Fufu gets rickrolled",
        "Fufu gets clipped out of context (clip must be posted in chat)",
        "Chat shakes the cokey (> or = 10 different chatters)",
        "Fufu denies flashbang/being pale",
        "Fufu explains why she is not homeless after being called such",
        "Fufu says 'lies and slander'",
        "Mods side with chat",
        "Yandere face",
        "Fufu does the 'sombramain' (disappears)",
        "Denial is not my catchphrase",
        "I hate it here",
        "Fufu says she's 18% assertive",
        "Fufu clicks on a link in chat and it's a Fufu meme",
        "Intense moment in any game, Fufu goes: 'O loot!'",
        "WHOOOSE D*CK !?",
        "Fufu fails at math",
        "Fufu meows out of panic",
        "Fufu chokes/panic in-game during intense moment",
        "Fufu tries to defend her cooking - catfood liking",
        "Fufu at least 3 minutes late to stream after timer hits 0 Latege",
        "Bathroom break",
        "Fufu tells someone 'Ok you're so done'",
        "Oh you son of a mother, you probably also have a father",
        "Water ASMR",
        "Fufu blows the party tooter",
        "Fufu shittalks her chat to raiders",
        "I'm not gonna make it easy for you (Fufu about bingo)",
        "Fufu says this is outrageous",
      ];

      const cells = document.querySelectorAll(".cell");
      const randomValues = getRandomValues(collection, 25);
      cells.forEach((cell, index) => {
        const div = document.createElement("div"); // Create a new div element
        div.classList.add("wrapper"); // Add the class "wrapper" to the div
        const paragraph = document.createElement("p"); // Create a new paragraph element
        if (cell.classList.contains("cell-free")) {
          paragraph.textContent = "FREE GARY SPACE";
        } else {
          paragraph.textContent = randomValues[index];
        }
        div.appendChild(paragraph); // Append the paragraph to the div
        cell.appendChild(div); // Append the div to the cell
      });

      function getRandomValues(array, count) {
        const shuffled = array.sort(() => 0.5 - Math.random());
        return shuffled.slice(0, count);
      }
      function toggleLineThrough() {
        if (this.querySelector(".circle")) {
          this.querySelector(".wrapper").removeChild(this.querySelector(".circle"));
        } else {
          const circle = document.createElement("div");
          circle.classList.add("circle");
          this.querySelector(".wrapper").appendChild(circle);
        }
      }

      const allowedKeys = {
        37: "left",
        38: "up",
        39: "right",
        40: "down",
        65: "a",
        66: "b",
      };
      // the 'official' Konami Code sequence
      const konamiCode = ["up", "up", "down", "down", "left", "right", "left", "right", "b", "a"];
      // a variable to remember the 'position' the user has reached so far.
      let konamiCodePosition = 0;
      // add keydown event listener
      document.addEventListener("keydown", function (e) {
        // get the value of the key code from the key map
        let key = allowedKeys[e.keyCode];
        // get the value of the required key from the konami code
        let requiredKey = konamiCode[konamiCodePosition];
        // compare the key with the required key
        if (key == requiredKey) {
          // move to the next key in the konami code sequence
          konamiCodePosition++;
          // if the last key is reached, activate cheats
          if (konamiCodePosition == konamiCode.length) {
            activateCheats();
            konamiCodePosition = 0;
          }
        } else {
          konamiCodePosition = 0;
        }
      });
      function activateCheats() {
        const listElement = document.querySelector(".list");
        const existingSecretItem = document.querySelector(".secret");
        if (existingSecretItem) {
          return; // Do nothing if a list item with class name "secret" already exists
        }
        const listItem = document.createElement("li");
        const link = document.createElement("a");
        listItem.className = "secret";
        listItem.textContent = "CONGRATS YOU HAVE FOUND A SECRET ";
        link.href = "https://www.youtube.com/watch?v=dQw4w9WgXcQ";
        link.textContent = "GARY";
        link.target = "_blank";
        listItem.style.marginTop = "2rem";
        listItem.appendChild(link);
        listElement.appendChild(listItem);
      }

      document.addEventListener("DOMContentLoaded", function () {
        const darkMode = localStorage.getItem("dark-mode");
        if (darkMode === "true") {
          toggleDarkMode();
        }
        logStringInConsole(
          "Hi! Here's your clue: There's a certain code you can input on this page. The code was popular among NES Contra gamers and went by the name 'Contra Code' or '30 Lives Code'. Now it is known by a different name. Good luck!"
        );
      });
      function logStringInConsole(string) {
        console.log(string);
      }
      function toggleDarkMode() {
        document.body.classList.toggle("dark-mode");
        if (document.body.classList.contains("dark-mode")) {
          localStorage.setItem("dark-mode", "true");
        } else {
          localStorage.setItem("dark-mode", "false");
        }
      }
      function checkForWinningCondition() {
        const rows = 5; // assuming 5x5 grid
        const cols = 5;
        let cellsArray = Array.from(cells);

        // Check rows and columns
        for (let i = 0; i < rows; i++) {
          let row = cellsArray.slice(i * rows, i * rows + rows);
          let col = cellsArray.filter((_, j) => j % cols === i);
          checkSequence(row);
          checkSequence(col);
        }

        // Check diagonals
        let diag1 = cellsArray.filter((_, i) => i % (rows + 1) === 0);
        let diag2 = cellsArray.filter((_, i) => i % (rows - 1) === 0 && i !== 0 && i !== cellsArray.length - 1);
        checkSequence(diag1);
        checkSequence(diag2);
      }

      function checkSequence(sequence) {
        let count = 0;
        let winningCells = [];
        for (let cell of sequence) {
          if (cell.querySelector(".circle")) {
            count++;
            winningCells.push(cell);
          } else {
            count = 0;
            winningCells = [];
          }
          if (count === 5) {
            winningCells.forEach((cell) => cell.classList.add("highlight"));
            break;
          }
        }
      }

      function removeHighlight(cell) {
        const rows = 5; // assuming 5x5 grid
        const cols = 5;
        let cellsArray = Array.from(cells);
        let index = cellsArray.indexOf(cell);

        // Find the row, column, and diagonals that the cell belongs to
        let row = cellsArray.slice(Math.floor(index / rows) * rows, Math.floor(index / rows) * rows + rows);
        let col = cellsArray.filter((_, j) => j % cols === index % cols);
        let diag1 = cellsArray.filter((_, i) => i % (rows + 1) === index % (rows + 1));
        let diag2 = cellsArray.filter(
          (_, i) => i % (rows - 1) === index % (rows - 1) && i !== 0 && i !== cellsArray.length - 1
        );

        // Remove the "highlight" class from all cells in these groups
        [...row, ...col, ...diag1, ...diag2].forEach((cell) => cell.classList.remove("highlight"));
      }

      // Add this function call in the click event listener
      cells.forEach((cell) => {
        cell.addEventListener("click", function () {
          if (this.querySelector(".circle")) {
            removeHighlight(this);
          } else {
            checkForWinningCondition();
          }
          toggleLineThrough.call(this);
          checkForWinningCondition();
        });
      });
    </script>
  </body>
</html>
