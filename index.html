<!DOCTYPE html>
<html>
  <head>
    <title>Fufu Bingo</title>
  </head>
  <body style="width: fit-content; text-align: center; padding: 2rem; margin: 0; font-family: cursive">
    <div style="display: flex">
      <div>
        <div
          id="bingoDiv"
          style="
            width: fit-content;
            text-align: center;
            padding: 2rem;
            margin: 0;
            background: linear-gradient(to bottom, black, #4d4d4d);
            border-radius: 4px;
          "
        >
          <h1 style="color: white; letter-spacing: 20px; font-size: 60px">Fufu Bingo</h1>

          <table class="grid">
            <tbody>
              <tr>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
              </tr>
              <tr>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
              </tr>
              <tr>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell cell-free"></td>
                <td class="cell"></td>
                <td class="cell"></td>
              </tr>
              <tr>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
              </tr>
              <tr>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
                <td class="cell"></td>
              </tr>
            </tbody>
          </table>
        </div>
        <div style="margin-top: 2rem">
          <a
            style="border: 1px solid black; padding: 24px; border-radius: 4px; font-size: 24px; cursor: pointer"
            onclick="saveDivAsImage()"
            >Save as Image</a
          >
        </div>
      </div>
      <div style="margin-left: 5rem; padding-top: 4rem; font-size: 24px">
        <ul style="list-style: none; padding: 0px" class="list">
          <li>WATCH FUFU LIVE ON <a href="https://www.twitch.tv/fufu" target="_blank">TWITCH</a></li>
          <li style="margin-top: 2rem">
            CHECK ALL AVAILABLE PROMPTS OR SUGGEST NEW ONES
            <a
              href="https://docs.google.com/spreadsheets/d/16097iUdG0rW028w2dxASdTqvFvuQSR_VzWCoMLD3xyM/edit?usp=sharing"
              target="_blank"
              >HERE</a
            >
          </li>
        </ul>
      </div>
    </div>

    <style>
      .cell {
        border: 1px solid white;
        width: 150px;
        height: 150px;
        color: white;
        padding: 10px;
        font-size: 20px;
        cursor: pointer;
        position: relative;
        min-width: 150px;
      }
      .circle {
        width: 130px;
        height: 130px;
        border: 12px solid yellow;
        border-radius: 50%;
        z-index: 999;
        position: absolute;
        top: 0;
      }
      .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
      }
    </style>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script>
      function saveDivAsImage() {
        const div = document.querySelector("#bingoDiv");
        html2canvas(div).then(function (canvas) {
          const link = document.createElement("a");
          link.href = canvas.toDataURL();
          link.download = "bingo.png";
          link.click();
        });
      }

      // Add code to fill table cells with random JSON collection values
      const collection = [
        "It's not a Garyathon",
        "Fufu licks the screen",
        "Butter knife",
        "MYAA",
        "Fufu brings out her tail",
        "Fufu explains something for eternity",
        "Fufu cries",
        "Laser pointer",
        "Fufu hisses",
        "Fufu says something sus",
        "I'm not a masochist",
        "Boing sound effect",
        "HAAAAA!?",
        "I am not a clown",
        "Fufu reads out a chat copypasta",
        "Heart eyes",
        "Fufu presses the wrong button/toggle",
        "YIPPEE",
        "Stop shaking the cokey",
        "You are not called Gary",
        "Fufu pouts",
        "I'm not lewd, I'm daring",
        "Fine kok",
        "Fufu mispronounces a word",
        "PSPSPSPS",
        "Fufu gets sidetracked for 5 min on a single video",
        "Fufu says it's a warm up game for the 3rd time",
        "Fufu thirsts on a game/anime/virtual character",
        "Fufu complains we ruin raiders arrival",
        "Fufu calls for help to mods (and it doesn't work)",
        "Fufu says 'I have lots of bitches'",
        "Fufu says 'I'm not a furry'",
        "Laser pointer and butter knife combo",
        "Meme sub gift",
        "First time chatter makes Fufu mad (FirstTimeChadder)",
        "Fufu tries to ban the bingo",
        "Mrs Bach walks over keyboard/control panel",
        "Fufu gets rickrolled",
        "Fufu gets clipped out of context",
        "Chat shakes the cokey (> or = 10 different chatters)",
        "Fufu denies flashbang/being pale",
        "Fufu gets called homeless",
        "Fufu says 'lies and slander'",
        "Mods side with chat",
        "Yandere face",
        "Fufu does the 'sombramain'",
        "Denial is not my catchphrase",
        "I hate it here",
      ];

      const cells = document.querySelectorAll(".cell");
      const randomValues = getRandomValues(collection, 25);
      cells.forEach((cell, index) => {
        const div = document.createElement("div"); // Create a new div element
        div.classList.add("wrapper"); // Add the class "wrapper" to the div
        const paragraph = document.createElement("p"); // Create a new paragraph element
        if (cell.classList.contains("cell-free")) {
          paragraph.textContent = "FREE GARY SPACE";
        } else {
          paragraph.textContent = randomValues[index];
        }
        div.appendChild(paragraph); // Append the paragraph to the div
        cell.appendChild(div); // Append the div to the cell
      });

      function getRandomValues(array, count) {
        const shuffled = array.sort(() => 0.5 - Math.random());
        return shuffled.slice(0, count);
      }
      function toggleLineThrough() {
        if (this.querySelector(".circle")) {
          this.querySelector(".wrapper").removeChild(this.querySelector(".circle"));
        } else {
          const circle = document.createElement("div");
          circle.classList.add("circle");
          this.querySelector(".wrapper").appendChild(circle);
        }
      }
      cells.forEach((cell) => {
        cell.addEventListener("click", toggleLineThrough);
      });

      const allowedKeys = {
        37: "left",
        38: "up",
        39: "right",
        40: "down",
        65: "a",
        66: "b",
      };
      // the 'official' Konami Code sequence
      const konamiCode = ["up", "up", "down", "down", "left", "right", "left", "right", "b", "a"];
      // a variable to remember the 'position' the user has reached so far.
      var konamiCodePosition = 0;
      // add keydown event listener
      document.addEventListener("keydown", function (e) {
        // get the value of the key code from the key map
        var key = allowedKeys[e.keyCode];
        // get the value of the required key from the konami code
        var requiredKey = konamiCode[konamiCodePosition];
        // compare the key with the required key
        if (key == requiredKey) {
          // move to the next key in the konami code sequence
          konamiCodePosition++;
          // if the last key is reached, activate cheats
          if (konamiCodePosition == konamiCode.length) {
            activateCheats();
            konamiCodePosition = 0;
          }
        } else {
          konamiCodePosition = 0;
        }
      });
      function activateCheats() {
        const listElement = document.querySelector(".list");
        const listItem = document.createElement("li");
        const link = document.createElement("a");
        listItem.textContent = "CONGRATS YOU HAVE FOUND A SECRET ";
        link.href = "https://www.youtube.com/watch?v=dQw4w9WgXcQ";
        link.textContent = "GARY";
        link.target = "_blank";
        listItem.style.marginTop = "2rem";
        listItem.appendChild(link);
        listElement.appendChild(listItem);
      }
    </script>
  </body>
</html>
